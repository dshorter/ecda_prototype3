<dom-module id="ecda-container">

    <link rel="import" href="ecda-gadget.html">
    <link rel="import"
          href="bower_components/iron-flex-layout/iron-flex-layout-classes.html">

    <link rel="import" href="bower_components/iron-meta/iron-meta.html">

    <style include="iron-flex iron-flex-alignment"></style>


    <template>


        <div>
            <paper-material>
                <p>Canvas Name:
                    {{gadgetsCollection.DashboardCanvas.CanvasName}} </p>
                <p>Datasource Name:
                    {{gadgetsCollection.DashboardCanvas.DatasourceName }}</p>
            </paper-material>
        </div>
        <div class="layout horizontal wrap" id="xx1">
            <template is="dom-repeat"
                      items="{{gadgetsCollection.DashboardCanvas.Gadgets.gadget  }}">
                <ecda-gadget id="gadget{{index }}"
                             canvas-json="{{item }}"></ecda-gadget>
            </template>
        </div>

    </template>
    <script>
        Polymer({
            is: 'ecda-container',
            properties: {
                gadgetsCollection: {
                    type: Object,
                    observer: 'canvasResponseJson2_change',
                    notify: true
                }
            },
            canvasResponseJson2_change: function () {
                /*     logThis("canvasResponseJson2_change")
                 //  walk(this.gadgetsCollection.DashboardCanvas.Gadgets, "this.gadgetsCollection.DashboardCanvas.Gadgets")

                 if ( Array.isArray(this.gadgetsCollection.DashboardCanvas.Gadgets.gadget) ==  false  ) {

                 var oneGadget = this.gadgetsCollection.DashboardCanvas.Gadgets.gadget;
                 oneGadget = [oneGadget];
                 this.gadgetsCollection.DashboardCanvas.Gadgets.gadget = null;
                 this.gadgetsCollection.DashboardCanvas.Gadgets.gadget = oneGadget;

                 logThis("one item array" + " -- " + this.gadgetsCollection.DashboardCanvas.Gadgets.gadget.length);
                 } */
                // logThis("array check " + " -- " +   Array.isArray(  th*/is.gadgetsCollection.DashboardCanvas.Gadgets.gadget  )  )
            }

        });
    </script>

</dom-module>


