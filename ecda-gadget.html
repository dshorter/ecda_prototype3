<dom-module id="ecda-gadget">


    <link rel="import" href="gadgets/ecda-freq.html"/>
    <link rel="import" href="gadgets/ecda-twoxtwo.html"/>
    <link rel="import" href="gadgets/ecda-chart.html"/>
    <link rel="import" href="gadgets/ecda-generic.html"/>
    <link rel="import" href="gadgets/ecda-epicurve.html"/>


    <style>
        .outdiv {
            margin: 20px;
        }
    </style>


    <template>
        <div class="outdiv">

            <paper-card id="gadgetcard"
                        heading="Gadget {{canvasJson.gadgetTitle   }}  "
                        image=""
                        elevation="4 " animated-shadow="true ">
                <div class="card-content ">

                    <!--     <p>
                             <paper-input label="Top "
                                          value="{{canvasJson.top }}"></paper-input>
                         </p>

                         <paper-slider min="10 " max="200 "
                                       value="110 "></paper-slider>
                         <paper-input label="Type stuff here "></paper-input>
     -->
                    <div id="placeApple">
                        <p id="filltohere">AAAA</p>
                        <form></form>
                    </div>


                </div>
            </paper-card>

        </div>

    </template>
    <script>
        Polymer({
            is: 'ecda-gadget',
            properties: {
                jsondata: String,
                canvasStr: String,
                canvasJson: {
                    type: Object,
                    value: "haha",
                    notify: true

                }

            },


            getKeys: function (canvasJson) {
                return Object.keys(canvasJson);
            },
            ready: function () {
                //   this.async(function () {

                /*     var myNode = document.getElementById("placeholder");
                 while (myNode.firstChild) {
                 myNode.removeChild(myNode.firstChild);
                 }

                 */


                /*    while ( myNode.children.length >  1    ) {
                 if (myNode.firstChild.id != "filltohere")
                 myNode.removeChild(myNode.firstChild);
                 }*/


                var thisElementName = ecda.getGadgetElementName(this.canvasJson.gadgetType);

                var thisGadget = document.createElement(thisElementName);
                thisGadget.canvasJson = this.canvasJson;
                thisGadget.className = "gadgetclass";


                logThis("thisGadget " + thisGadget.canvasJson);
                walk(thisGadget.canvasJson, "thisGadget.canvasJson");

                //  Polymer.dom(this.$.gadgetcard).insertBefore(thisGadget, this.$.cardactions);
                //    Polymer.dom(this.$.placeholder).innerHTML = '';

                //  Polymer.dom(this.$.placeApple).insertBefore(thisGadget, this.$.filltohere);

                Polymer.dom.flush();


                Polymer.dom(this.$.placeApple).appendChild(thisGadget);

                Polymer.dom.flush();


                //  })
            }
        });
    </script>


</dom-module>