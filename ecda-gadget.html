<dom-module id="ecda-gadget">


    <link rel="import" href="ecda-freq.html"/>


    <style>
        .outdiv {
            margin: 20px;
        }
    </style>


    <template>
        <div class="outdiv">

            <paper-card id="gadgetcard"
                        heading="Gadget {{canvasJson.gadgetTitle   }}  "
                        image=""
                        elevation="4 " animated-shadow="true ">
                <div class="card-content ">
                    <!--   <template is="dom-repeat" items="{{gadgetKeys  }}">
                           <p>
                               <paper-textarea>{{item.key }}</paper-textarea>
                               <paper-input id="gadget{{index }}"
                                            value="{{item.val  }}"></paper-input>
                           </p>
                       </template>-->

                    <p>
                        <paper-input label="Top "
                                     value="{{canvasJson.top }}"></paper-input>
                    </p>

                    <paper-slider min="10 " max="200 "
                                  value="110 "></paper-slider>
                    <paper-input label="Type stuff here "></paper-input>

                </div>
                <div id="placeholder">
                    <div id="filltohere"></div>
                </div>
                <content class="card-actions " id="cardactions">

                </content>
            </paper-card>

        </div>

    </template>
    <script>
        Polymer({
            is: 'ecda-gadget',
            properties: {
                jsondata: String,
                canvasStr: String,
                canvasJson: {
                    type: Object,
                    value: "haha",
                    notify: true

                },


                gadgetKeys: {
                    computed: 'getValues(canvasJson  )'
                }
            },
            getKeys: function (canvasJson) {
                return Object.keys(canvasJson);
            },
            ready: function () {
                //   this.async(function () {
                var freq = document.createElement("ecda-freq");
                freq.canvasJson = this.canvasJson;

                logThis("freq " + freq.canvasJson);

                //  logThis("freq "  )        ;
                //    walk ( card7, "card7"  )        ;

                //   logThis("this.$.card7.children.length -- " + this.$.card7.children.length);
                //  Polymer.dom(this.$.card7).appendChild(freq);

                var thisCard = this.getContentChildren('#card7');
                //  thisCard.appendChild(freq  )        ;

                //  Polymer.dom(this.$.gadgetcard).insertBefore(freq, this.$.cardactions);
                Polymer.dom(this.$.placeholder).insertBefore(freq, this.$.filltohere);

                logThis("thisCard " + thisCard.length);

                //   logThis("this.$.card7.children.length -- " + this.$.card7.children.length);


                //    })

            },
            getValues: function (canvasJson) {
                var kvpArray = [];
                for (var key in   canvasJson) {
                    if (canvasJson.hasOwnProperty(key)) {
                        var val = canvasJson[key];
                        kvpArray.push({"key": key, "val": val});
                    }
                }
                return kvpArray;

            }
        })
        ;
    </script>


</dom-module>