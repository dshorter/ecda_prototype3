<dom-module id="ecda-gadget">


    <link rel="import" href="gadgets/ecda-freq.html"/>
    <link rel="import" href="gadgets/ecda-twoxtwo.html"/>

    <style>
        .outdiv {
            margin: 20px;
        }
    </style>


    <template>
        <div class="outdiv">

            <paper-card id="gadgetcard"
                        heading="Gadget {{canvasJson.gadgetTitle   }}  "
                        image=""
                        elevation="4 " animated-shadow="true ">
                <div class="card-content ">

                    <!--     <p>
                             <paper-input label="Top "
                                          value="{{canvasJson.top }}"></paper-input>
                         </p>

                         <paper-slider min="10 " max="200 "
                                       value="110 "></paper-slider>
                         <paper-input label="Type stuff here "></paper-input>
     -->
                    <div id="placeholder">
                        <div id="filltohere"></div>
                    </div>

                </div>
            </paper-card>

        </div>

    </template>
    <script>
        Polymer({
            is: 'ecda-gadget',
            properties: {
                jsondata: String,
                canvasStr: String,
                canvasJson: {
                    type: Object,
                    value: "haha",
                    notify: true

                },


                gadgetKeys: {
                    computed: 'getValues(canvasJson  )'
                }
            },
            getKeys: function (canvasJson) {
                return Object.keys(canvasJson);
            },
            ready: function () {
                //   this.async(function () {

                var thisElementName = ecda.getGadgetElemetName(this.canvasJson.gadgetType);

                var thisGadget = document.createElement(thisElementName);
                thisGadget.canvasJson = this.canvasJson;

                logThis("thisGadget " + thisGadget.canvasJson);

                //  logThis("thisGadget "  )        ;
                //    walk ( card7, "card7"  )        ;

                //   logThis("this.$.card7.children.length -- " + this.$.card7.children.length);
                //  Polymer.dom(this.$.card7).appendChild(thisGadget);

                var thisCard = this.getContentChildren('#card7');
                //  thisCard.appendChild(thisGadget  )        ;

                //  Polymer.dom(this.$.gadgetcard).insertBefore(thisGadget, this.$.cardactions);
                Polymer.dom(this.$.placeholder).insertBefore(thisGadget, this.$.filltohere);

                logThis("thisCard " + thisCard.length);

                //   logThis("this.$.card7.children.length -- " + this.$.card7.children.length);


                //    })

            },
            getValues: function (canvasJson) {
                var kvpArray = [];
                for (var key in   canvasJson) {
                    if (canvasJson.hasOwnProperty(key)) {
                        var val = canvasJson[key];
                        kvpArray.push({"key": key, "val": val});
                    }
                }
                return kvpArray;

            }
        })
        ;
    </script>


</dom-module>