<dom-module id="ecda-epicurve">

    <link rel="import" href=""/>

    <style>
        .outdiv {
            margin: 20px;
        }
    </style>

    <template>


        <div class="outdiv">


            <paper-card id="gadgetcard"
                        heading="Gadget {{gadgetJson.gadgetName  }}  "
                        image=""
                        elevation="4 " animated-shadow="true ">
                <div class="card-content ">


                    <p>
                        <paper-input label="Top "
                                     value="{{gadgetJson.top }}"></paper-input>
                    </p>

                    <paper-slider min="10 " max="200 "
                                  value="110 "></paper-slider>
                    <paper-input label="Enter text here "></paper-input>
                    <paper-button dialog-confirm autofocus
                                  on-click="_makeEpiCurveRequeest">OK
                    </paper-button>
                </div>

                <iron-ajax id="gadgetRequestAjax"
                           on-response="handleGadgetResponse"></iron-ajax>

                <paper-material>
                    <div>{{gadgetJson.gadgetType }}</div>
                </paper-material>


            </paper-card>

        </div>

    </template>
    <script>
        Polymer({
            is: 'ecda-epicurve',
            properties: {
                gadgetJson: {
                    type: String,
                    value: "Json Here",
                    notify: true
                }
            },


            ready: function () {

                //  this.async(function () {
                walk(this.gadgetJson, "this.gadgetJson ec ");

                this._makeEpiCurveRequeest();

                //      tryAjax(this.$.gadgetRequestAjax, "epicurve", jsonRequest);
            },
            handleGadgetResponse: function (response) {

                logThis(JSON.parse(response.detail.xhr.responseText));

            },
            _makeEpiCurveRequeest: function () {

                var request = {

                    DatasourceName: this.gadgetJson.DatasourceName,
                    dateVariable: this.gadgetJson.dateVariable,
                    xAxisStartValue: this.gadgetJson.xAxisStartValue,
                    xAxisEndValue: this.gadgetJson.xAxisEndValue,
                    dateInterval: this.gadgetJson.dateInterval,
                    caseStatusVariable: this.gadgetJson.caseStatusVariable

                }

                walk(this.gadgetJson);

                walk(request);

                tryAjax(this.$.gadgetRequestAjax, "epicurve", request);

            }
        });
    </script>


</dom-module>





